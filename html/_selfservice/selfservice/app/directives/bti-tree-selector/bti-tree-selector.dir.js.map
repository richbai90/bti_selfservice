{"version":3,"sources":["../../../../_itsm_default_v2_template/app/directives/bti-tree-selector/bti-tree-selector.dir.js"],"names":["angular","module","directive","restrict","templateUrl","scope","bindToController","data","display","value","controllerAs","controller","updateData","filterData","copy","focused","updateClass","cssClass","class","focus","alert","blur","hover","category","hoverOut","select","option","selected","id","hasChildren","prevData","options","children","length","filter","pattern","el","i","match","RegExp","equals","child","link","elem","attrs","ctrl","attr"],"mappings":"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","file":"bti-tree-selector.dir.js","sourcesContent":["(() => {\r\n  'use strict';\r\n  angular\r\n    .module('swSelfService')\r\n    .directive('btiTreeSelector', [\r\n      () => ({\r\n        restrict: 'E',\r\n        templateUrl: 'app/directives/bti-tree-selector/bti-tree-selector.tpl.html',\r\n        scope: true,\r\n        bindToController: {\r\n          data: '=',\r\n          display: '@',\r\n          value: '@',\r\n        },\r\n        controllerAs: 'treeSelector',\r\n        controller ()  {\r\n\r\n          const updateData = () => {\r\n            this.filterData = angular.copy(this.data);\r\n          };\r\n\r\n          updateData();\r\n\r\n          this.focused = false;\r\n\r\n          this.updateClass = (cssClass) => {\r\n            this.class = cssClass;\r\n          };\r\n\r\n          this.focus = () => {\r\n            alert('testing')\r\n            this.focused = true\r\n          };\r\n\r\n          this.blur = () => {\r\n            this.focused = false\r\n          };\r\n\r\n          this.hover = (category) => {\r\n            this.category = category\r\n          };\r\n\r\n          this.hoverOut = () => {\r\n            this.category = ''\r\n          };\r\n\r\n          this.select = (option) => {\r\n            this.selected = option.id;\r\n            if (this.hasChildren(option)) {\r\n              if (option.id === this.selected && this.prevData) {\r\n                this.data = this.prevData;\r\n                this.prevData = null;\r\n                updateData();\r\n              } else {\r\n                this.prevData = this.data;\r\n                this.data = { options: [option] };\r\n                updateData();\r\n              }\r\n            }\r\n          };\r\n\r\n          this.hasChildren = option => option.children.length > 0;\r\n          this.filter = (pattern) => {\r\n            const filter = (el, i) => {\r\n              let match = el.id.match(new RegExp(`.?(${pattern}).?`, 'i'));\r\n              if (match) {\r\n                return match;\r\n              } else if (el.children.length) {\r\n                for (let option of this.data.options) {\r\n                  if (angular.equals(option, el)) {\r\n                    option.children = el.children.filter(filter, this);\r\n                  }\r\n                }\r\n                // this.data.options[i].children = el.children.filter(filter, this);\r\n                for (let child of el.children) {\r\n                  let match = filter(child, i);\r\n                  if (match) {\r\n                    return match\r\n                  }\r\n                }\r\n              }\r\n\r\n              return false;\r\n\r\n            };\r\n            this.data.options = this.filterData.options.filter(filter, this);\r\n          };\r\n\r\n        },\r\n        link (scope, elem, attrs, ctrl) {\r\n          elem.attr('class', '');\r\n          ctrl.updateClass(attrs.class);\r\n        }\r\n      }),\r\n    ]);\r\n})();"]}