{"version":3,"sources":["../../../../_itsm_default_v2_template/app/directives/bti-tree-selector/bti-tree-selector.dir.js"],"names":["angular","module","directive","restrict","templateUrl","scope","bindToController","data","display","value","controllerAs","controller","updateData","filterData","copy","focused","updateClass","cssClass","class","focus","alert","blur","hover","category","hoverOut","select","option","selected","id","hasChildren","prevData","options","children","length","filter","pattern","el","i","match","RegExp","equals","child","link","elem","attrs","ctrl","attr"],"mappings":"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","file":"bti-tree-selector.dir.js","sourcesContent":["(() => {\r\n  'use strict';\r\n  angular\r\n    .module('swSelfService')\r\n    .directive('btiTreeSelector', [\r\n      () => ({\r\n        restrict: 'E',\r\n        templateUrl: 'app/directives/bti-tree-selector/bti-tree-selector.tpl.html',\r\n        scope: true,\r\n        bindToController: {\r\n          data: '=',\r\n          display: '@',\r\n          value: '@',\r\n        },\r\n        controllerAs: 'treeSelector',\r\n        controller ()  {\r\n\r\n          const updateData = () => {\r\n            this.filterData = angular.copy(this.data);\r\n          };\r\n\r\n          updateData();\r\n\r\n          this.focused = false;\r\n\r\n          this.updateClass = (cssClass) => {\r\n            this.class = cssClass;\r\n          };\r\n\r\n          this.focus = () => {\r\n            alert('testing')\r\n            this.focused = true\r\n          };\r\n\r\n          this.blur = () => {\r\n            this.focused = false\r\n          };\r\n\r\n          this.hover = (category) => {\r\n            this.category = category\r\n          };\r\n\r\n          this.hoverOut = () => {\r\n            this.category = ''\r\n          };\r\n\r\n          this.select = (option) => {\r\n            this.selected = option.id;\r\n            if (this.hasChildren(option)) {\r\n              if (option.id === this.selected && this.prevData) {\r\n                this.data = this.prevData;\r\n                this.prevData = null;\r\n                updateData();\r\n              } else {\r\n                this.prevData = this.data;\r\n                this.data = { options: [option] };\r\n                updateData();\r\n              }\r\n            }\r\n          };\r\n\r\n          this.hasChildren = option => option.children.length > 0;\r\n          this.filter = (pattern) => {\r\n            const filter = (el, i) => {\r\n              let match = el.id.match(new RegExp(`.?(${pattern}).?`, 'i'));\r\n              if (match) {\r\n                return match;\r\n              } else if (el.children.length) {\r\n                for (let option of this.data.options) {\r\n                  if (angular.equals(option, el)) {\r\n                    option.children = el.children.filter(filter, this);\r\n                  }\r\n                }\r\n                // this.data.options[i].children = el.children.filter(filter, this);\r\n                for (let child of el.children) {\r\n                  let match = filter(child, i);\r\n                  if (match) {\r\n                    return match\r\n                  }\r\n                }\r\n              }\r\n\r\n              return false;\r\n\r\n            };\r\n            this.data.options = this.filterData.options.filter(filter, this);\r\n          };\r\n\r\n        },\r\n        link (scope, elem, attrs, ctrl) {\r\n          elem.attr('class', '');\r\n          ctrl.updateClass(attrs.class);\r\n        }\r\n      }),\r\n    ]);\r\n})();"]}