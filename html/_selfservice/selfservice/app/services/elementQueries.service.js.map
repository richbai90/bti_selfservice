{"version":3,"sources":["../../../_itsm_default_v2_template/app/services/elementQueries.service.js"],"names":["angular","module","factory","ResizeSensor","ElementQueries","trackingActive","elements","getEmSize","element","document","documentElement","fontSize","window","getComputedStyle","parseFloat","convertToPx","value","numbers","split","units","length","clientWidth","clientHeight","vw","vh","chooser","Math","SetupInformation","options","key","option","width","height","actualValue","attrValues","attrValue","attrName","addOption","idx","mode","property","join","attributes","call","offsetWidth","offsetHeight","hasOwnProperty","indexOf","k","setAttribute","substr","removeAttribute","setupElement","elementQueriesSetupInformation","elementQueriesSensor","push","allQueries","queueQuery","selector","getQuery","query","querySelectorAll","bind","$$","jQuery","findElementQueriesElements","i","j","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","getAttribute","src","rule","style","display","check","imageToDisplay","image","Image","onload","resizeSensor","findResponsiveImages","regex","attrRegex","extractQuery","css","match","smatch","replace","exec","attrs","attrMatch","readRules","type","selectorText","cssText","cssRules","defaultCssInjected","init","withTracking","styleSheets","e","name","createElement","innerHTML","getElementsByTagName","appendChild","update","detach","pop","instance","domLoaded","callback","addEventListener","test","navigator","userAgent","DOMLoadTimer","setInterval","readyState","clearInterval","listen","exports","Resize"],"mappings":"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","file":"elementQueries.service.js","sourcesContent":["/*\n * ElementQuery service ported over from css-element-queries library\n * To be dependency injected into an angular directive\n */\n\n(() => {\n  'use strict';\n  angular\n    .module('swSelfService')\n    .factory('ElementQuery', ['Resize',\n    ((ResizeSensor) => {\n\n      /**\n       * Copyright Marc J. Schmidt. See the LICENSE file at the top-level at\n       * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n       */\n\n      /**\n       *\n       * @type {Function}\n       * @constructor\n       */\n      var ElementQueries = function () {\n\n        var trackingActive = false;\n        var elements = [];\n\n        /**\n         *\n         * @param element\n         * @returns {Number}\n         */\n        function getEmSize(element) {\n          if (!element) {\n            element = document.documentElement;\n          }\n          var fontSize = window.getComputedStyle(element, null).fontSize;\n          return parseFloat(fontSize) || 16;\n        }\n\n        /**\n         *\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n         *\n         * @param {HTMLElement} element\n         * @param {*} value\n         * @returns {*}\n         */\n        function convertToPx(element, value) {\n          var numbers = value.split(/\\d/);\n          var units = numbers[numbers.length - 1];\n          value = parseFloat(value);\n          switch (units) {\n            case \"px\":\n              return value;\n            case \"em\":\n              return value * getEmSize(element);\n            case \"rem\":\n              return value * getEmSize();\n            // Viewport units!\n            // According to http://quirksmode.org/mobile/tableViewport.html\n            // documentElement.clientWidth/Height gets us the most reliable info\n            case \"vw\":\n              return value * document.documentElement.clientWidth / 100;\n            case \"vh\":\n              return value * document.documentElement.clientHeight / 100;\n            case \"vmin\":\n            case \"vmax\":\n              var vw = document.documentElement.clientWidth / 100;\n              var vh = document.documentElement.clientHeight / 100;\n              var chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n              return value * chooser(vw, vh);\n            default:\n              return value;\n            // for now, not supporting physical units (since they are just a set number of px)\n            // or ex/ch (getting accurate measurements is hard)\n          }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @constructor\n         */\n        function SetupInformation(element) {\n          this.element = element;\n          this.options = {};\n          var key, option, width = 0, height = 0, value, actualValue, attrValues, attrValue, attrName;\n\n          /**\n           * @param {Object} option {mode: 'min|max', property: 'width|height', value: '123px'}\n           */\n          this.addOption = function (option) {\n            var idx = [option.mode, option.property, option.value].join(',');\n            this.options[idx] = option;\n          };\n\n          var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n          /**\n           * Extracts the computed width/height and sets to min/max- attribute.\n           */\n          this.call = function () {\n            // extract current dimensions\n            width = this.element.offsetWidth;\n            height = this.element.offsetHeight;\n\n            attrValues = {};\n\n            for (key in this.options) {\n              if (!this.options.hasOwnProperty(key)) {\n                continue;\n              }\n              option = this.options[key];\n\n              value = convertToPx(this.element, option.value);\n\n              actualValue = option.property == 'width' ? width : height;\n              attrName = option.mode + '-' + option.property;\n              attrValue = '';\n\n              if (option.mode == 'min' && actualValue >= value) {\n                attrValue += option.value;\n              }\n\n              if (option.mode == 'max' && actualValue <= value) {\n                attrValue += option.value;\n              }\n\n              if (!attrValues[attrName]) attrValues[attrName] = '';\n              if (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n                attrValues[attrName] += ' ' + attrValue;\n              }\n            }\n\n            for (var k in attributes) {\n              if (!attributes.hasOwnProperty(k)) continue;\n\n              if (attrValues[attributes[k]]) {\n                this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n              } else {\n                this.element.removeAttribute(attributes[k]);\n              }\n            }\n          };\n        }\n\n        /**\n         * @param {HTMLElement} element\n         * @param {Object}      options\n         */\n        function setupElement(element, options) {\n          if (element.elementQueriesSetupInformation) {\n            element.elementQueriesSetupInformation.addOption(options);\n          } else {\n            element.elementQueriesSetupInformation = new SetupInformation(element);\n            element.elementQueriesSetupInformation.addOption(options);\n            element.elementQueriesSensor = new ResizeSensor(element, function () {\n              element.elementQueriesSetupInformation.call();\n            });\n          }\n          element.elementQueriesSetupInformation.call();\n\n          if (trackingActive && elements.indexOf(element) < 0) {\n            elements.push(element);\n          }\n        }\n\n        /**\n         * @param {String} selector\n         * @param {String} mode min|max\n         * @param {String} property width|height\n         * @param {String} value\n         */\n        var allQueries = {};\n\n        function queueQuery(selector, mode, property, value) {\n          if (typeof(allQueries[mode]) == 'undefined') allQueries[mode] = {};\n          if (typeof(allQueries[mode][property]) == 'undefined') allQueries[mode][property] = {};\n          if (typeof(allQueries[mode][property][value]) == 'undefined') {\n            allQueries[mode][property][value] = selector;\n          } else {\n            allQueries[mode][property][value] += ',' + selector;\n          }\n        }\n\n        function getQuery() {\n          var query;\n          if (document.querySelectorAll) query = document.querySelectorAll.bind(document);\n          if (!query && 'undefined' !== typeof $$) query = $$;\n          if (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n          if (!query) {\n            throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n          }\n\n          return query;\n        }\n\n        /**\n         * Start the magic. Go through all collected rules (readRules()) and attach the resize-listener.\n         */\n        function findElementQueriesElements() {\n          var query = getQuery();\n\n          for (var mode in allQueries) if (allQueries.hasOwnProperty(mode)) {\n\n            for (var property in allQueries[mode]) if (allQueries[mode].hasOwnProperty(property)) {\n              for (var value in allQueries[mode][property]) if (allQueries[mode][property].hasOwnProperty(value)) {\n                var elements = query(allQueries[mode][property][value]);\n                for (var i = 0, j = elements.length; i < j; i++) {\n                  setupElement(elements[i], {\n                    mode: mode,\n                    property: property,\n                    value: value\n                  });\n                }\n              }\n            }\n\n          }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         */\n        function attachResponsiveImage(element) {\n          var children = [];\n          var rules = [];\n          var sources = [];\n          var defaultImageId = 0;\n          var lastActiveImage = -1;\n          var loadedImages = [];\n\n          for (var i in element.children) {\n            if (!element.children.hasOwnProperty(i)) continue;\n\n            if (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n              children.push(element.children[i]);\n\n              var minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n              //var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n              var src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n              sources.push(src);\n\n              var rule = {\n                minWidth: minWidth\n              };\n\n              rules.push(rule);\n\n              if (!minWidth) {\n                defaultImageId = children.length - 1;\n                element.children[i].style.display = 'block';\n              } else {\n                element.children[i].style.display = 'none';\n              }\n            }\n          }\n\n          lastActiveImage = defaultImageId;\n\n          function check() {\n            var imageToDisplay = false, i;\n\n            for (i in children) {\n              if (!children.hasOwnProperty(i)) continue;\n\n              if (rules[i].minWidth) {\n                if (element.offsetWidth > rules[i].minWidth) {\n                  imageToDisplay = i;\n                }\n              }\n            }\n\n            if (!imageToDisplay) {\n              //no rule matched, show default\n              imageToDisplay = defaultImageId;\n            }\n\n            if (lastActiveImage != imageToDisplay) {\n              //image change\n\n              if (!loadedImages[imageToDisplay]) {\n                //image has not been loaded yet, we need to load the image first in memory to prevent flash of\n                //no content\n\n                var image = new Image();\n                image.onload = function () {\n                  children[imageToDisplay].src = sources[imageToDisplay];\n\n                  children[lastActiveImage].style.display = 'none';\n                  children[imageToDisplay].style.display = 'block';\n\n                  loadedImages[imageToDisplay] = true;\n\n                  lastActiveImage = imageToDisplay;\n                };\n\n                image.src = sources[imageToDisplay];\n              } else {\n                children[lastActiveImage].style.display = 'none';\n                children[imageToDisplay].style.display = 'block';\n                lastActiveImage = imageToDisplay;\n              }\n            } else {\n              //make sure for initial check call the .src is set correctly\n              children[imageToDisplay].src = sources[imageToDisplay];\n            }\n          }\n\n          element.resizeSensor = new ResizeSensor(element, check);\n          check();\n\n          if (trackingActive) {\n            elements.push(element);\n          }\n        }\n\n        function findResponsiveImages() {\n          var query = getQuery();\n\n          var elements = query('[data-responsive-image],[responsive-image]');\n          for (var i = 0, j = elements.length; i < j; i++) {\n            attachResponsiveImage(elements[i]);\n          }\n        }\n\n        var regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n        var attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n        /**\n         * @param {String} css\n         */\n        function extractQuery(css) {\n          var match;\n          var smatch;\n          css = css.replace(/'/g, '\"');\n          while (null !== (match = regex.exec(css))) {\n            smatch = match[1] + match[3];\n            var attrs = match[2];\n            var attrMatch;\n\n            while (null !== (attrMatch = attrRegex.exec(attrs))) {\n              queueQuery(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n            }\n          }\n        }\n\n        /**\n         * @param {CssRule[]|String} rules\n         */\n        function readRules(rules) {\n          var selector = '';\n          if (!rules) {\n            return;\n          }\n          if ('string' === typeof rules) {\n            rules = rules.toLowerCase();\n            if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n              extractQuery(rules);\n            }\n          } else {\n            for (var i = 0, j = rules.length; i < j; i++) {\n              if (1 === rules[i].type) {\n                selector = rules[i].selectorText || rules[i].cssText;\n                if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n                  extractQuery(selector);\n                } else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n                  extractQuery(selector);\n                }\n              } else if (4 === rules[i].type) {\n                readRules(rules[i].cssRules || rules[i].rules);\n              }\n            }\n          }\n        }\n\n        var defaultCssInjected = false;\n\n        /**\n         * Searches all css rules and setups the event listener to all elements with element query rules..\n         *\n         * @param {Boolean} withTracking allows and requires you to use detach, since we store internally all used elements\n         *                               (no garbage collection possible if you don not call .detach() first)\n         */\n        this.init = function (withTracking) {\n          trackingActive = typeof withTracking === 'undefined' ? false : withTracking;\n\n          for (var i = 0, j = document.styleSheets.length; i < j; i++) {\n            try {\n              readRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n            } catch (e) {\n              if (e.name !== 'SecurityError') {\n                throw e;\n              }\n            }\n          }\n\n          if (!defaultCssInjected) {\n            var style = document.createElement('style');\n            style.type = 'text/css';\n            style.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img { width: 100%;}';\n            document.getElementsByTagName('head')[0].appendChild(style);\n            defaultCssInjected = true;\n          }\n\n          findElementQueriesElements();\n          findResponsiveImages();\n        };\n\n        /**\n         *\n         * @param {Boolean} withTracking allows and requires you to use detach, since we store internally all used elements\n         *                               (no garbage collection possible if you don not call .detach() first)\n         */\n        this.update = function (withTracking) {\n          this.init(withTracking);\n        };\n\n        this.detach = function () {\n          if (!this.withTracking) {\n            throw 'withTracking is not enabled. We can not detach elements since we don not store it.' +\n            'Use ElementQueries.withTracking = true; before domready or call ElementQueryes.update(true).';\n          }\n\n          var element;\n          while (element = elements.pop()) {\n            ElementQueries.detach(element);\n          }\n\n          elements = [];\n        };\n      };\n\n      /**\n       *\n       * @param {Boolean} withTracking allows and requires you to use detach, since we store internally all used elements\n       *                               (no garbage collection possible if you don not call .detach() first)\n       */\n      ElementQueries.update = function (withTracking) {\n        ElementQueries.instance.update(withTracking);\n      };\n\n      /**\n       * Removes all sensor and elementquery information from the element.\n       *\n       * @param {HTMLElement} element\n       */\n      ElementQueries.detach = function (element) {\n        if (element.elementQueriesSetupInformation) {\n          //element queries\n          element.elementQueriesSensor.detach();\n          delete element.elementQueriesSetupInformation;\n          delete element.elementQueriesSensor;\n\n        } else if (element.resizeSensor) {\n          //responsive image\n\n          element.resizeSensor.detach();\n          delete element.resizeSensor;\n        } else {\n          //console.log('detached already', element);\n        }\n      };\n\n      ElementQueries.withTracking = false;\n\n      ElementQueries.init = function () {\n        if (!ElementQueries.instance) {\n          ElementQueries.instance = new ElementQueries();\n        }\n\n        ElementQueries.instance.init(ElementQueries.withTracking);\n      };\n\n      var domLoaded = function (callback) {\n        /* Internet Explorer */\n        /*@cc_on\n         @if (@_win32 || @_win64)\n         document.write('<script id=\"ieScriptLoad\" defer src=\"//:\"><\\/script>');\n         document.getElementById('ieScriptLoad').onreadystatechange = function() {\n         if (this.readyState == 'complete') {\n         callback();\n         }\n         };\n         @end @*/\n        /* Mozilla, Chrome, Opera */\n        if (document.addEventListener) {\n          document.addEventListener('DOMContentLoaded', callback, false);\n        }\n        /* Safari, iCab, Konqueror */\n        else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n          var DOMLoadTimer = setInterval(function () {\n            if (/loaded|complete/i.test(document.readyState)) {\n              callback();\n              clearInterval(DOMLoadTimer);\n            }\n          }, 10);\n        }\n        /* Other web browsers */\n        else {\n          window.onload = callback;\n        }\n      };\n\n      ElementQueries.listen = function () {\n        domLoaded(ElementQueries.init);\n      };\n\n      // make available to common module loader\n      if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n        module.exports = ElementQueries;\n      }\n      else {\n        window.ElementQueries = ElementQueries;\n        ElementQueries.listen();\n      }\n\n      return ElementQueries;\n\n    })(Resize)])\n})();\n"]}