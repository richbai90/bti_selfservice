{"version":3,"sources":["../../../_itsm_default_v2_template/app/controllers/service.details.ctrl.js"],"names":["angular","module","controller","ServiceDetailsController","$inject","$q","$scope","$rootScope","SWSessionService","$stateParams","ServiceDetailsService","$state","$timeout","toaster","wssHelpers","$previousState","store","$uibModal","$window","previousState","get","responseToController","isWssAdmin","hasWebflag","service_name","serviceName","service_id","serviceID","service_detail_service","main_service","time_out","windowWidth","innerWidth","getXMLMCInformation","then","responseOverview","serviceInformation","responseCostGeneral","costGeneral","responseWeekly","hasOwnProperty","costWeek","responseMonthly","costMonth","responseYearly","costYear","responseRCostBreakdown","requestCostBreakdown","responseSCostBreakdown","costServiceCostBreakdown","error","console","log","setServiceListSelect","parameter","parentResponse","parentDependencies","childResponse","childDependencies","responseOptions","serviceOptions","responseLevels","serviceLevels"],"mappings":"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","file":"service.details.ctrl.js","sourcesContent":["(function () {\r\n    'use strict';\r\n    angular\r\n        .module('swSelfService')\r\n        .controller('ServiceDetailsController', ServiceDetailsController);\r\n\r\n    //ServiceDetailsController.$inject = ['$q','$scope','$rootScope','SWSessionService','$stateParams','ServiceDetailsService','$state', '$timeout', 'toaster','wssHelpers', '$previousState', 'store','$uibModal'];\r\n    ServiceDetailsController.$inject = ['$q','$scope','$rootScope','SWSessionService','$stateParams','ServiceDetailsService','$state', '$timeout', 'toaster','wssHelpers', '$previousState', 'store','$uibModal', '$window'];\r\n             \r\n    function ServiceDetailsController($q, $scope, $rootScope, SWSessionService, $stateParams, ServiceDetailsService, $state, $timeout, toaster, wssHelpers, $previousState, store, $uibModal, $window)\r\n    {\r\n   \r\n         //debugger;\r\n         var previousState = $previousState.get();\r\n         var responseToController;\r\n         $scope.isWssAdmin = wssHelpers.hasWebflag('OPTION_ADMIN');\r\n         $scope.service_name = $stateParams.serviceName ;\r\n         $scope.service_id = $stateParams.serviceID ;\r\n         $scope.service_detail_service = ServiceDetailsService;\r\n         $scope.main_service = SWSessionService;\r\n         $scope.time_out = $timeout;\r\n         $scope.windowWidth = $window.innerWidth;\r\n         \r\n         //Business overview information\r\n         $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"business_overview\").then(\r\n              function(responseOverview){\r\n                  //Once we have the information we storage \r\n                  $scope.serviceInformation = responseOverview[0]; \r\n\r\n                  //Getting the cost summary information. General\r\n                  $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"general_cost\").then(\r\n                    function(responseCostGeneral){\r\n                      $scope.costGeneral=responseCostGeneral[0];\r\n\r\n                      //Getting the cost summary information. Weekly\r\n                      $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"general_cost_week\").then(\r\n                        function(responseWeekly){\r\n                          if (responseWeekly.hasOwnProperty()){\r\n                            $scope.costWeek=responseWeekly;\r\n                          }\r\n                          else{\r\n                              $scope.costWeek=\"0.00\";\r\n                          }\r\n                        \r\n                          //Getting the cost summary information. Monthly\r\n                          $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"general_cost_month\").then(\r\n                            function(responseMonthly){\r\n                              if (responseMonthly.hasOwnProperty())\r\n                                  $scope.costMonth=responseMonthly;\r\n                              else\r\n                                  $scope.costMonth=\"0.00\";\r\n\r\n                              //Getting the cost summary information. Yearly\r\n                              $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"general_cost_year\").then(\r\n                                  function(responseYearly){\r\n                                    if (responseYearly.hasOwnProperty())\r\n                                        $scope.costYear=responseYearly;\r\n                                    else\r\n                                        $scope.costYear=\"0.00\";\r\n\r\n                                    //Getting the request cost breakdown information.\r\n                                    $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"request_breakdown\").then(\r\n                                        \r\n                                        function(responseRCostBreakdown){\r\n                                          $scope.requestCostBreakdown=responseRCostBreakdown;\r\n\r\n                                          //Getting the service cost breakdown information.\r\n                                          $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"service_breakdown\").then(\r\n                                              function(responseSCostBreakdown){\r\n                                                $scope.costServiceCostBreakdown=responseSCostBreakdown;\r\n                                              },\r\n                                              function(error){\r\n                                                console.log(\"Error getting Service Cost Breakdown Information from the server\");                                                   \r\n                                              }\r\n                                          );\r\n                                              \r\n                                        },\r\n                                        function(error){\r\n                                          console.log(\"Error getting Request Cost Breakdown Information from the server\"); \r\n                                        }\r\n                                    );  \r\n\r\n                                  },\r\n                                  function(error){\r\n                                    console.log(\"Error getting General Cost Information Yearly from the server\");                                                   \r\n                                  }\r\n                              );\r\n\r\n\r\n                            },\r\n                            function(error){\r\n                              console.log(\"Error getting General Cost Information Monthly from the server\");                                                   \r\n                            }\r\n                          );\r\n\r\n                        },\r\n                        function(error){\r\n                          console.log(\"Error getting General Cost Information Weekly from the server\");                                        \r\n                        }\r\n                      );                      \r\n                    },\r\n                    function(error){\r\n                      console.log(\"Error getting General Cost Information from the server\");\r\n                    }\r\n\r\n                  );\r\n\r\n              },\r\n\r\n              function(error){\r\n                  console.log(\"Error getting Business OverView Information from the server\");\r\n              }\r\n         );\r\n\r\n         $scope.setServiceListSelect = function(parameter){\r\n\r\n              //Execute calls XMLMC to get parent and child information\r\n              if (parameter==\"depend\"){\r\n                  $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"parent_dependencies\").then(\r\n                      function(parentResponse){\r\n                          $scope.parentDependencies = parentResponse;\r\n                          $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"child_dependencies\").then(\r\n\r\n                            function(childResponse){\r\n                              $scope.childDependencies = childResponse;\r\n                            },\r\n                            function(error){\r\n                              console.log(\"Error getting child dependencies information\");\r\n                            }\r\n                          );\r\n                        },\r\n                        function(error){\r\n                          console.log(\"Error getting parent dependencies information\");\r\n                        }\r\n                  );\r\n              }\r\n\r\n              if (parameter==\"opts\"){\r\n                $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"options_information\").then(\r\n                  function(responseOptions){\r\n                      $scope.serviceOptions = responseOptions;\r\n                    },\r\n                    function(error){\r\n                      console.log(\"Error getting service options information\");\r\n                    }\r\n                );\r\n              }\r\n\r\n              if (parameter==\"levls\"){\r\n\r\n                $scope.service_detail_service.getXMLMCInformation($scope.service_id,\"levels_information\").then(\r\n                  function(responseLevels){\r\n                      $scope.serviceLevels = responseLevels;\r\n                    },\r\n                    function(error){\r\n                      console.log(\"Error getting service options information\");\r\n                    }\r\n                );\r\n              }\r\n\r\n         }\r\n    }\r\n\r\n    \r\n    \r\n    \r\n\r\n})();"]}