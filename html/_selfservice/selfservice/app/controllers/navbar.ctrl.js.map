{"version":3,"sources":["../../../_itsm_default_v2_template/app/controllers/navbar.ctrl.js"],"names":["angular","module","controller","NavBarController","$inject","$scope","SWSessionService","$state","wssLogging","store","brandLogo","wssBranding","logoImage","sessServ","logoff","previousLogin","checkActiveSession","then","response","error","toastType","toastBody","toastTitle","sendToast","go","objCustDetail","get","authCount","numAuths","activePage","stateLoc","current","name"],"mappings":"AAAA,CAAC,YAAY;AACT;;AACAA,UACKC,MADL,CACY,eADZ,EAEKC,UAFL,CAEgB,kBAFhB,EAEoCC,gBAFpC;;AAIAA,mBAAiBC,OAAjB,GAA2B,CAAC,QAAD,EAAU,kBAAV,EAA6B,QAA7B,EAAsC,YAAtC,EAAmD,OAAnD,CAA3B;;AAEA,WAASD,gBAAT,CAA0BE,MAA1B,EAAkCC,gBAAlC,EAAoDC,MAApD,EAA4DC,UAA5D,EAAwEC,KAAxE,EACA;AACEJ,WAAOK,SAAP,GAAmBC,YAAYC,SAA/B;AACAP,WAAOQ,QAAP,GAAkBP,gBAAlB;AACAD,WAAOS,MAAP,GAAgB,YAAY;AAC1B;AACAT,aAAOQ,QAAP,CAAgBE,aAAhB,GAAgC,IAAhC;AACAV,aAAOQ,QAAP,CAAgBG,kBAAhB,GAAqCC,IAArC,CAA0C,YAAU;;AAElDZ,eAAOQ,QAAP,CAAgBC,MAAhB,GAAyBG,IAAzB,CAA8B,UAASC,QAAT,EAAkB,CAC/C,CADD,EACE,UAASC,KAAT,EAAe;AACf,cAAIC,YAAY,OAAhB;AACA,cAAIC,YAAY,mFAAhB;AACA,cAAIC,aAAa,uBAAjB;AACAd,qBAAWe,SAAX,CAAqBH,SAArB,EAAgCC,SAAhC,EAA2CC,UAA3C;AACAf,iBAAOiB,EAAP,CAAU,OAAV;AACD,SAPD;AAQD,OAVD;AAWD,KAdD;;AAgBA,QAAIC,gBAAgB,EAApB;AACA,QAAGA,gBAAgBhB,MAAMiB,GAAN,CAAU,aAAV,CAAnB,EAA6C;AAC3C,UAAGD,cAAcE,SAAjB,EAA4BtB,OAAOQ,QAAP,CAAgBe,QAAhB,GAA2BH,cAAcE,SAAzC;AAC7B;;AAEDtB,WAAOwB,UAAP,GAAoB,UAASC,QAAT,EAAmB;AACrC,aAAOA,aAAavB,OAAOwB,OAAP,CAAeC,IAAnC;AACD,KAFD;AAGD;AAEJ,CAtCD","file":"navbar.ctrl.js","sourcesContent":["(function () {\r\n    'use strict';\r\n    angular\r\n        .module('swSelfService')\r\n        .controller('NavBarController', NavBarController);\r\n\r\n    NavBarController.$inject = ['$scope','SWSessionService','$state','wssLogging','store'];\r\n\r\n    function NavBarController($scope, SWSessionService, $state, wssLogging, store)\r\n    {\r\n      $scope.brandLogo = wssBranding.logoImage;\r\n      $scope.sessServ = SWSessionService;\r\n      $scope.logoff = function () {\r\n        //Check session, if active then get request details - this runs when the controller is initialised\r\n        $scope.sessServ.previousLogin = true;\r\n        $scope.sessServ.checkActiveSession().then(function(){\r\n\r\n          $scope.sessServ.logoff().then(function(response){\r\n          },function(error){\r\n            var toastType = \"error\";\r\n            var toastBody = 'There has been an error in disconnecting your session. Please close your browser.';\r\n            var toastTitle = \"Session Logoff Error!\";\r\n            wssLogging.sendToast(toastType, toastBody, toastTitle);\r\n            $state.go('login');\r\n          });\r\n        });\r\n      };\r\n\r\n      var objCustDetail = [];\r\n      if(objCustDetail = store.get(\"custDetails\")) {\r\n        if(objCustDetail.authCount) $scope.sessServ.numAuths = objCustDetail.authCount;\r\n      }\r\n\r\n      $scope.activePage = function(stateLoc) {\r\n        return stateLoc === $state.current.name;\r\n      };\r\n    }\r\n\r\n})();\r\n"]}